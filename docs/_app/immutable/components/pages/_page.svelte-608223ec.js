import{S as Y,i as K,s as Z,k as F,q as S,l as z,m as L,r as M,h as m,n as d,b as U,G as _,B as O,o as Ve,a as A,c as H,I as ve,p as P,J as T,K as fe,C as Pe,D as Re,E as Ue,F as Te,f as N,t as B,L as je,w as G,x as J,y as Q,u as le,z as X,M as oe,N as me,O as ee,P as te,Q as ie,g as de,d as ce,R as Ne,T as ke,U as Ie,V as We}from"../../chunks/index-9d90608e.js";function Ae(i){let e,t;return{c(){e=F("h1"),t=S("Image Crop and resize for the Web"),this.h()},l(n){e=z(n,"H1",{class:!0});var l=L(e);t=M(l,"Image Crop and resize for the Web"),l.forEach(m),this.h()},h(){d(e,"class","text-sm")},m(n,l){U(n,e,l),_(e,t)},p:O,i:O,o:O,d(n){n&&m(e)}}}class He extends Y{constructor(e){super(),K(this,e,null,Ae,Z,{})}}function Ee(i){let e,t,n,l,a,o,r=i[0]&&ye(i);return{c(){e=F("div"),t=F("img"),l=A(),r&&r.c(),this.h()},l(s){e=z(s,"DIV",{class:!0});var f=L(e);t=z(f,"IMG",{src:!0,id:!0,class:!0,alt:!0,style:!0}),l=H(f),r&&r.l(f),f.forEach(m),this.h()},h(){ve(t.src,n=i[2])||d(t,"src",n),d(t,"id","main-image"),d(t,"class","object-contain w-fit max-h-[50vh]"),d(t,"alt",""),P(t,"transform","rotate("+i[1]+"deg)"),d(e,"class","w-fit h-fit justify-center relative overflow-hidden")},m(s,f){U(s,e,f),_(e,t),_(e,l),r&&r.m(e,null),a||(o=T(t,"load",i[7]),a=!0)},p(s,f){f&4&&!ve(t.src,n=s[2])&&d(t,"src",n),f&2&&P(t,"transform","rotate("+s[1]+"deg)"),s[0]?r?r.p(s,f):(r=ye(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(s){s&&m(e),r&&r.d(),a=!1,o()}}}function ye(i){let e,t,n,l,a,o,r,s,f,u,p;return{c(){e=F("div"),t=A(),n=F("div"),l=A(),a=F("div"),o=A(),r=F("div"),s=A(),f=F("div"),this.h()},l(h){e=z(h,"DIV",{class:!0,style:!0,"data-whole":!0}),L(e).forEach(m),t=H(h),n=z(h,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(n).forEach(m),l=H(h),a=z(h,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(a).forEach(m),o=H(h),r=z(h,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(r).forEach(m),s=H(h),f=z(h,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(f).forEach(m),this.h()},h(){d(e,"class","absolute border-2 border-dashed border-slate-300 cursor-move"),P(e,"top",i[6]+"px"),P(e,"left",i[5]+"px"),P(e,"width",i[4]+"px"),P(e,"height",i[3]+"px"),d(e,"data-whole","true"),d(n,"class","absolute bg-sky-700 cursor-se-resize"),P(n,"top",i[6]-$+"px"),P(n,"left",i[5]-$+"px"),P(n,"width",x+"px"),P(n,"height",x+"px"),d(n,"data-north","true"),d(n,"data-west","true"),d(a,"class","absolute bg-sky-700 cursor-sw-resize"),P(a,"top",i[6]-$+"px"),P(a,"left",i[5]+i[4]-x+$+"px"),P(a,"width",x+"px"),P(a,"height",x+"px"),d(a,"data-north","true"),d(a,"data-west","false"),d(r,"class","absolute bg-sky-700 cursor-nw-resize"),P(r,"top",i[6]+i[3]-x+$+"px"),P(r,"left",i[5]+i[4]-x+$+"px"),P(r,"width",x+"px"),P(r,"height",x+"px"),d(r,"data-north","false"),d(r,"data-west","false"),d(f,"class","absolute bg-sky-700 cursor-ne-resize"),P(f,"top",i[6]+i[3]-x+$+"px"),P(f,"left",i[5]-$+"px"),P(f,"width",x+"px"),P(f,"height",x+"px"),d(f,"data-north","false"),d(f,"data-west","true")},m(h,c){U(h,e,c),U(h,t,c),U(h,n,c),U(h,l,c),U(h,a,c),U(h,o,c),U(h,r,c),U(h,s,c),U(h,f,c),u||(p=[T(e,"pointerdown",i[8]),T(e,"pointermove",i[9]),T(e,"pointerup",i[10]),T(n,"pointerdown",i[8]),T(n,"pointermove",i[9]),T(n,"pointerup",i[10]),T(a,"pointerdown",i[8]),T(a,"pointermove",i[9]),T(a,"pointerup",i[10]),T(r,"pointerdown",i[8]),T(r,"pointermove",i[9]),T(r,"pointerup",i[10]),T(f,"pointerdown",i[8]),T(f,"pointermove",i[9]),T(f,"pointerup",i[10])],u=!0)},p(h,c){c&64&&P(e,"top",h[6]+"px"),c&32&&P(e,"left",h[5]+"px"),c&16&&P(e,"width",h[4]+"px"),c&8&&P(e,"height",h[3]+"px"),c&64&&P(n,"top",h[6]-$+"px"),c&32&&P(n,"left",h[5]-$+"px"),c&64&&P(a,"top",h[6]-$+"px"),c&48&&P(a,"left",h[5]+h[4]-x+$+"px"),c&72&&P(r,"top",h[6]+h[3]-x+$+"px"),c&48&&P(r,"left",h[5]+h[4]-x+$+"px"),c&72&&P(f,"top",h[6]+h[3]-x+$+"px"),c&32&&P(f,"left",h[5]-$+"px")},d(h){h&&m(e),h&&m(t),h&&m(n),h&&m(l),h&&m(a),h&&m(o),h&&m(r),h&&m(s),h&&m(f),u=!1,fe(p)}}}function Be(i){let e,t=i[2]&&Ee(i);return{c(){e=F("div"),t&&t.c(),this.h()},l(n){e=z(n,"DIV",{class:!0});var l=L(e);t&&t.l(l),l.forEach(m),this.h()},h(){d(e,"class","flex flex-grow flex-col justify-center items-center p-2")},m(n,l){U(n,e,l),t&&t.m(e,null)},p(n,[l]){n[2]?t?t.p(n,l):(t=Ee(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:O,o:O,d(n){n&&m(e),t&&t.d()}}}const $=3,x=10;function Oe(i,e,t){let n,l,a,o,{imageFile:r}=e,{top:s}=e,{left:f}=e,{width:u}=e,{ratio:p}=e,{rotation:h}=e,c=1,V,v,W;Ve(()=>{if(FileReader){const g=new FileReader;g.onload=function(){typeof g.result=="string"&&t(2,W=g.result)},g.readAsDataURL(r)}else console.error("FileRreader is not supported in thios browser!")});let C;function b(g){const R=g.currentTarget;C=new ResizeObserver(ae=>{D(ae[0].target)}),C.observe(R)}function D(g){t(15,c=g.offsetWidth/g.naturalWidth),V=g.naturalWidth,v=g.naturalHeight;const R=v/V;if(p<=R){t(0,u=V);const ae=u*p;t(12,f=0),t(11,s=(v-ae)/2)}else t(0,u=v/p),t(12,f=(V-u)/2),t(11,s=0)}let k={active:!1,top:0,left:0,width:0,height:0,offset:{x:0,y:0}};function ne(g){g.stopPropagation(),g.preventDefault();const R=g.currentTarget,ae=g.clientX,re=g.clientY;R.setPointerCapture(g.pointerId),k={...k,active:!0,top:s,left:f,width:u,height:u*p,offset:{x:ae,y:re}}}function E(g){const R=g.clientX,ae=g.clientY;if(k.active){const re=g.currentTarget,y=(R-k.offset.x)/c,I=(ae-k.offset.y)/c,se=re.dataset.north==="true",ue=re.dataset.west==="true";re.dataset.whole==="true"?w(I,y):j(I,y,se,ue)}}function q(g){g.stopPropagation(),g.preventDefault(),k={...k,active:!1}}function w(g,R){t(11,s=k.top+g),t(12,f=k.left+R),s<0&&t(11,s=0),f<0&&t(12,f=0),f+u>V&&t(12,f=V-u),s+u*p>v&&t(11,s=v-u*p)}function j(g,R,ae,re){let y=u*p;const I={top:s,left:f,width:u,height:y};g<R?(ae?(I.top=k.top+g,I.height=k.width*p-g):(I.height=k.width*p+g,I.top=k.top),re?(I.width=I.height/p,I.left=k.left+k.width-I.width):(I.width=I.height/p,I.left=k.left)):(re?(I.left=k.left+R,I.width=k.width-R):(I.width=k.width+R,I.left=k.left),ae?(I.height=I.width*p,I.top=k.top+k.height-I.height):I.top=k.top),I.height=I.width*p,I.top>=0&&I.top+I.height<=v&&f>=0&&I.left+I.width<=V&&(t(11,s=I.top),t(12,f=I.left),t(0,u=I.width),y=I.height)}return i.$$set=g=>{"imageFile"in g&&t(13,r=g.imageFile),"top"in g&&t(11,s=g.top),"left"in g&&t(12,f=g.left),"width"in g&&t(0,u=g.width),"ratio"in g&&t(14,p=g.ratio),"rotation"in g&&t(1,h=g.rotation)},i.$$.update=()=>{if(i.$$.dirty&16384&&p){const g=document.getElementById("main-image");g&&g.src&&D(g)}i.$$.dirty&34816&&t(6,n=s*c),i.$$.dirty&36864&&t(5,l=f*c),i.$$.dirty&32769&&t(4,a=u*c),i.$$.dirty&49153&&t(3,o=u*p*c)},[u,h,W,o,a,l,n,b,ne,E,q,s,f,r,p,c]}class Se extends Y{constructor(e){super(),K(this,e,Oe,Be,Z,{imageFile:13,top:11,left:12,width:0,ratio:14,rotation:1})}}function Me(i){let e,t,n,l;const a=i[1].default,o=Pe(a,i,i[0],null);return{c(){e=F("button"),o&&o.c(),this.h()},l(r){e=z(r,"BUTTON",{type:!0,class:!0});var s=L(e);o&&o.l(s),s.forEach(m),this.h()},h(){d(e,"type","button"),d(e,"class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 dark:bg-blue-700 dark:hover:bg-blue-900 focus:outline-none dark:focus:ring-blue-800")},m(r,s){U(r,e,s),o&&o.m(e,null),t=!0,n||(l=T(e,"click",i[2]),n=!0)},p(r,[s]){o&&o.p&&(!t||s&1)&&Re(o,a,r,r[0],t?Te(a,r[0],s,null):Ue(r[0]),null)},i(r){t||(N(o,r),t=!0)},o(r){B(o,r),t=!1},d(r){r&&m(e),o&&o.d(r),n=!1,l()}}}function Ce(i,e,t){let{$$slots:n={},$$scope:l}=e;function a(o){je.call(this,i,o)}return i.$$set=o=>{"$$scope"in o&&t(0,l=o.$$scope)},[l,n,a]}class pe extends Y{constructor(e){super(),K(this,e,Ce,Me,Z,{})}}function Ge(i){let e;return{c(){e=S("change")},l(t){e=M(t,"change")},m(t,n){U(t,e,n)},d(t){t&&m(e)}}}function Je(i){let e,t,n,l,a,o,r;return o=new pe({props:{$$slots:{default:[Ge]},$$scope:{ctx:i}}}),o.$on("click",i[2]),{c(){e=F("div"),t=S(i[0]),n=S(":"),l=S(i[1]),a=A(),G(o.$$.fragment)},l(s){e=z(s,"DIV",{});var f=L(e);t=M(f,i[0]),n=M(f,":"),l=M(f,i[1]),a=H(f),J(o.$$.fragment,f),f.forEach(m)},m(s,f){U(s,e,f),_(e,t),_(e,n),_(e,l),_(e,a),Q(o,e,null),r=!0},p(s,[f]){(!r||f&1)&&le(t,s[0]),(!r||f&2)&&le(l,s[1]);const u={};f&16&&(u.$$scope={dirty:f,ctx:s}),o.$set(u)},i(s){r||(N(o.$$.fragment,s),r=!0)},o(s){B(o.$$.fragment,s),r=!1},d(s){s&&m(e),X(o)}}}function Qe(i,e,t){let{width:n}=e,{height:l}=e;const a=[{width:16,height:9},{width:4,height:3},{width:5,height:4},{width:3,height:4},{width:1,height:2},{width:2,height:1},{width:1,height:1}];function o(){const r=a.findIndex(f=>f.width===n&&f.height===l);let s=0;r<a.length-1&&(s=r+1),t(0,n=a[s].width),t(1,l=a[s].height)}return i.$$set=r=>{"width"in r&&t(0,n=r.width),"height"in r&&t(1,l=r.height)},[n,l,o]}class Xe extends Y{constructor(e){super(),K(this,e,Qe,Je,Z,{width:0,height:1})}}function Ye(i){let e,t,n,l,a,o,r,s;return{c(){e=F("label"),t=F("div"),n=S(i[0]),l=S(" deg"),a=A(),o=F("input"),this.h()},l(f){e=z(f,"LABEL",{class:!0});var u=L(e);t=z(u,"DIV",{class:!0});var p=L(t);n=M(p,i[0]),l=M(p," deg"),p.forEach(m),a=H(u),o=z(u,"INPUT",{type:!0,min:!0,max:!0,step:!0}),u.forEach(m),this.h()},h(){d(t,"class",""),d(o,"type","range"),d(o,"min","-45"),d(o,"max","45"),d(o,"step","0.5"),d(e,"class","flex flex-col items-center")},m(f,u){U(f,e,u),_(e,t),_(t,n),_(t,l),_(e,a),_(e,o),oe(o,i[0]),r||(s=[T(o,"change",i[1]),T(o,"input",i[1])],r=!0)},p(f,[u]){u&1&&le(n,f[0]),u&1&&oe(o,f[0])},i:O,o:O,d(f){f&&m(e),r=!1,fe(s)}}}function Ke(i,e,t){let{rotation:n}=e;function l(){n=me(this.value),t(0,n)}return i.$$set=a=>{"rotation"in a&&t(0,n=a.rotation)},[n,l]}class Ze extends Y{constructor(e){super(),K(this,e,Ke,Ye,Z,{rotation:0})}}const ge=["image/jpeg","image/png"];function $e(i){return i==="image/jpeg"?"jpg":i==="image/png"?"png":""}function xe(i,e){const t=window.URL.createObjectURL(i),n=document.createElement("a");n.style.display="none",n.href=t,n.download=e,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t)}const et=i=>new Promise((e,t)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",l=>t(l)),n.setAttribute("crossOrigin","anonymous"),n.src=i});function tt(i){return i*Math.PI/180}async function it(i,e,t,n=0,l,a,o){const r=await et(i),s=document.createElement("canvas"),f=s.getContext("2d");if(!f)return null;const u=t/e.width,p=Math.max(r.width,r.height,e.width*u,e.height*u),h=2*(p/2*Math.sqrt(2)),c=2*(p/2*Math.sqrt(2));s.width=h,s.height=c,l==="image/jpeg"&&(f.fillStyle=o,f.fillRect(0,0,s.width,s.height)),f.translate(h/2,c/2),f.scale(u,u),f.rotate(tt(n)),f.translate(-r.width/2,-r.height/2),f.drawImage(r,0,0),f.setTransform(1,0,0,1,0,0);const V=f.getImageData(h/2-r.width*u/2+e.left*u,c/2-r.height*u/2+e.top*u,e.width*u,e.height*u);return s.width=e.width*u,s.height=e.height*u,l==="image/jpeg"&&(f.fillStyle=o,f.fillRect(0,0,s.width,s.height)),f.putImageData(V,0,0),new Promise(v=>{s.toBlob(W=>{v(W)},l,a/100)})}const nt=`
    importScripts('https://unpkg.com/mozjpeg-js', 'https://cdn.rawgit.com/psych0der/pngquantjs/master/demo/js/pngquant.min.js');
    onmessage = function(event) {
        const {args, type, data} = event.data, 
            optimize = type=='image/png' ? pngquant : mozjpeg.encode;
        const result = optimize(data, args, console.log);
        postMessage(result);
    };
`,Fe=URL.createObjectURL(new Blob([nt],{type:"application/javascript"}));async function at(i,e,t){if(!Fe)return;const n=new Worker(Fe),l=new Promise(r=>{n.onmessage=s=>{r([s.data.data]),n.terminate()}});let a;return e==="image/jpeg"?a={quality:t}:e==="image/png"&&(a={quality:`${t-5}-${t+5}`,speed:"2"}),n.postMessage({data:new Uint8Array(i),type:e,args:a}),await l}function rt(i){let e;return{c(){e=S("change")},l(t){e=M(t,"change")},m(t,n){U(t,e,n)},d(t){t&&m(e)}}}function lt(i){let e,t,n,l,a;return l=new pe({props:{$$slots:{default:[rt]},$$scope:{ctx:i}}}),l.$on("click",i[1]),{c(){e=F("div"),t=S(i[0]),n=A(),G(l.$$.fragment),this.h()},l(o){e=z(o,"DIV",{class:!0});var r=L(e);t=M(r,i[0]),n=H(r),J(l.$$.fragment,r),r.forEach(m),this.h()},h(){d(e,"class","flex flex-col items-center")},m(o,r){U(o,e,r),_(e,t),_(e,n),Q(l,e,null),a=!0},p(o,[r]){(!a||r&1)&&le(t,o[0]);const s={};r&4&&(s.$$scope={dirty:r,ctx:o}),l.$set(s)},i(o){a||(N(l.$$.fragment,o),a=!0)},o(o){B(l.$$.fragment,o),a=!1},d(o){o&&m(e),X(l)}}}function ot(i,e,t){let{value:n="image/jpeg"}=e;function l(){const a=ge.findIndex(r=>r===n);let o=0;a<ge.length-1&&(o=a+1),t(0,n=ge[o])}return i.$$set=a=>{"value"in a&&t(0,n=a.value)},[n,l]}class st extends Y{constructor(e){super(),K(this,e,ot,lt,Z,{value:0})}}function ft(i){let e,t,n,l,a,o=Math.round(i[0]*i[1])+"",r,s,f,u,p;return{c(){e=F("div"),t=F("label"),n=F("div"),l=S(i[0]),a=S(" / "),r=S(o),s=A(),f=F("input"),this.h()},l(h){e=z(h,"DIV",{class:!0});var c=L(e);t=z(c,"LABEL",{});var V=L(t);n=z(V,"DIV",{class:!0});var v=L(n);l=M(v,i[0]),a=M(v," / "),r=M(v,o),v.forEach(m),s=H(V),f=z(V,"INPUT",{type:!0,min:!0,max:!0,step:!0}),V.forEach(m),c.forEach(m),this.h()},h(){d(n,"class",""),d(f,"type","range"),d(f,"min","100"),d(f,"max","2000"),d(f,"step","10"),d(e,"class","flex flex-col")},m(h,c){U(h,e,c),_(e,t),_(t,n),_(n,l),_(n,a),_(n,r),_(t,s),_(t,f),oe(f,i[0]),u||(p=[T(f,"change",i[2]),T(f,"input",i[2])],u=!0)},p(h,[c]){c&1&&le(l,h[0]),c&3&&o!==(o=Math.round(h[0]*h[1])+"")&&le(r,o),c&1&&oe(f,h[0])},i:O,o:O,d(h){h&&m(e),u=!1,fe(p)}}}function ut(i,e,t){let{ratio:n}=e,{width:l}=e;function a(){l=me(this.value),t(0,l)}return i.$$set=o=>{"ratio"in o&&t(1,n=o.ratio),"width"in o&&t(0,l=o.width)},[l,n,a]}class ht extends Y{constructor(e){super(),K(this,e,ut,ft,Z,{ratio:1,width:0})}}function gt(i){let e,t,n,l,a,o,r;return{c(){e=F("div"),t=F("label"),n=S(i[1]),l=A(),a=F("input"),this.h()},l(s){e=z(s,"DIV",{class:!0});var f=L(e);t=z(f,"LABEL",{for:!0,class:!0});var u=L(t);n=M(u,i[1]),u.forEach(m),l=H(f),a=z(f,"INPUT",{type:!0,id:!0,class:!0}),f.forEach(m),this.h()},h(){d(t,"for",i[2]),d(t,"class","block text-sm font-medium text-gray-900 dark:text-white"),d(a,"type","text"),d(a,"id",i[2]),d(a,"class","block w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),d(e,"class","grow flex flex-col items-center gap-1")},m(s,f){U(s,e,f),_(e,t),_(t,n),_(e,l),_(e,a),oe(a,i[0]),o||(r=[T(a,"input",i[4]),T(a,"click",i[3])],o=!0)},p(s,[f]){f&2&&le(n,s[1]),f&1&&a.value!==s[0]&&oe(a,s[0])},i:O,o:O,d(s){s&&m(e),o=!1,fe(r)}}}function dt(i,e,t){let{value:n=""}=e,{label:l=""}=e;const a=crypto.randomUUID();function o(s){je.call(this,i,s)}function r(){n=this.value,t(0,n)}return i.$$set=s=>{"value"in s&&t(0,n=s.value),"label"in s&&t(1,l=s.label)},[n,l,a,o,r]}class ct extends Y{constructor(e){super(),K(this,e,dt,gt,Z,{value:0,label:1})}}function mt(i){let e,t,n,l,a,o,r,s,f;return{c(){e=F("div"),t=F("label"),n=F("div"),l=S("%"),a=S(i[0]),o=A(),r=F("input"),this.h()},l(u){e=z(u,"DIV",{class:!0});var p=L(e);t=z(p,"LABEL",{});var h=L(t);n=z(h,"DIV",{class:!0});var c=L(n);l=M(c,"%"),a=M(c,i[0]),c.forEach(m),o=H(h),r=z(h,"INPUT",{type:!0,min:!0,max:!0,step:!0}),h.forEach(m),p.forEach(m),this.h()},h(){d(n,"class",""),d(r,"type","range"),d(r,"min","50"),d(r,"max","100"),d(r,"step","1"),d(e,"class","flex flex-col")},m(u,p){U(u,e,p),_(e,t),_(t,n),_(n,l),_(n,a),_(t,o),_(t,r),oe(r,i[0]),s||(f=[T(r,"change",i[1]),T(r,"input",i[1])],s=!0)},p(u,[p]){p&1&&le(a,u[0]),p&1&&oe(r,u[0])},i:O,o:O,d(u){u&&m(e),s=!1,fe(f)}}}function pt(i,e,t){let{quality:n}=e;function l(){n=me(this.value),t(0,n)}return i.$$set=a=>{"quality"in a&&t(0,n=a.quality)},[n,l]}class _t extends Y{constructor(e){super(),K(this,e,pt,mt,Z,{quality:0})}}function wt(i){let e,t,n,l,a,o,r;return{c(){e=F("label"),t=F("input"),n=A(),l=F("span"),a=S("Optimize"),this.h()},l(s){e=z(s,"LABEL",{class:!0});var f=L(e);t=z(f,"INPUT",{type:!0}),n=H(f),l=z(f,"SPAN",{});var u=L(l);a=M(u,"Optimize"),u.forEach(m),f.forEach(m),this.h()},h(){d(t,"type","checkbox"),d(e,"class","flex flex-row justify-center gap-1")},m(s,f){U(s,e,f),_(e,t),t.checked=i[0],_(e,n),_(e,l),_(l,a),o||(r=T(t,"change",i[1]),o=!0)},p(s,[f]){f&1&&(t.checked=s[0])},i:O,o:O,d(s){s&&m(e),o=!1,r()}}}function bt(i,e,t){let{value:n}=e;function l(){n=this.checked,t(0,n)}return i.$$set=a=>{"value"in a&&t(0,n=a.value)},[n,l]}class vt extends Y{constructor(e){super(),K(this,e,bt,wt,Z,{value:0})}}function kt(i){let e;return{c(){e=S("Download")},l(t){e=M(t,"Download")},m(t,n){U(t,e,n)},d(t){t&&m(e)}}}function It(i){let e,t,n,l,a,o,r,s,f,u,p,h,c,V,v,W,C,b,D;function k(y){i[10](y)}let ne={};i[0].format!==void 0&&(ne.value=i[0].format),t=new st({props:ne}),ee.push(()=>te(t,"value",k,i[0].format));function E(y){i[11](y)}let q={ratio:i[1]};i[0].width!==void 0&&(q.width=i[0].width),a=new ht({props:q}),ee.push(()=>te(a,"width",E,i[0].width));function w(y){i[12](y)}let j={};i[0].quality!==void 0&&(j.quality=i[0].quality),s=new _t({props:j}),ee.push(()=>te(s,"quality",w,i[0].quality));function g(y){i[13](y)}let R={};i[0].optimize!==void 0&&(R.value=i[0].optimize),p=new vt({props:R}),ee.push(()=>te(p,"value",g,i[0].optimize));function ae(y){i[14](y)}let re={label:"Suffix"};return i[0].suffix!==void 0&&(re.value=i[0].suffix),v=new ct({props:re}),ee.push(()=>te(v,"value",ae,i[0].suffix)),b=new pe({props:{$$slots:{default:[kt]},$$scope:{ctx:i}}}),b.$on("click",i[2]),{c(){e=F("div"),G(t.$$.fragment),l=A(),G(a.$$.fragment),r=A(),G(s.$$.fragment),u=A(),G(p.$$.fragment),c=A(),V=F("div"),G(v.$$.fragment),C=A(),G(b.$$.fragment),this.h()},l(y){e=z(y,"DIV",{class:!0});var I=L(e);J(t.$$.fragment,I),l=H(I),J(a.$$.fragment,I),r=H(I),J(s.$$.fragment,I),u=H(I),J(p.$$.fragment,I),c=H(I),V=z(I,"DIV",{class:!0});var se=L(V);J(v.$$.fragment,se),se.forEach(m),I.forEach(m),C=H(y),J(b.$$.fragment,y),this.h()},h(){d(V,"class","flex grow max-w-[10rem]"),d(e,"class","flex flex-row items-center gap-2")},m(y,I){U(y,e,I),Q(t,e,null),_(e,l),Q(a,e,null),_(e,r),Q(s,e,null),_(e,u),Q(p,e,null),_(e,c),_(e,V),Q(v,V,null),U(y,C,I),Q(b,y,I),D=!0},p(y,[I]){const se={};!n&&I&1&&(n=!0,se.value=y[0].format,ie(()=>n=!1)),t.$set(se);const ue={};I&2&&(ue.ratio=y[1]),!o&&I&1&&(o=!0,ue.width=y[0].width,ie(()=>o=!1)),a.$set(ue);const he={};!f&&I&1&&(f=!0,he.quality=y[0].quality,ie(()=>f=!1)),s.$set(he);const _e={};!h&&I&1&&(h=!0,_e.value=y[0].optimize,ie(()=>h=!1)),p.$set(_e);const we={};!W&&I&1&&(W=!0,we.value=y[0].suffix,ie(()=>W=!1)),v.$set(we);const be={};I&32768&&(be.$$scope={dirty:I,ctx:y}),b.$set(be)},i(y){D||(N(t.$$.fragment,y),N(a.$$.fragment,y),N(s.$$.fragment,y),N(p.$$.fragment,y),N(v.$$.fragment,y),N(b.$$.fragment,y),D=!0)},o(y){B(t.$$.fragment,y),B(a.$$.fragment,y),B(s.$$.fragment,y),B(p.$$.fragment,y),B(v.$$.fragment,y),B(b.$$.fragment,y),D=!1},d(y){y&&m(e),X(t),X(a),X(s),X(p),X(v),y&&m(C),X(b,y)}}}function Et(i,e,t){let{imageFile:n}=e,{ratio:l}=e,{rotation:a}=e,{fileName:o}=e,{variant:r}=e,{top:s}=e,{left:f}=e,{width:u}=e,{height:p}=e;async function h(){const b=$e(r.format),D=o+r.suffix+"."+b,k=URL.createObjectURL(n),ne=await it(k,{width:u,height:p,top:s,left:f},r.width,a,r.format,r.optimize?100:r.quality,"#fff");if(!ne)return;let E;if(r.optimize){const q=await ne.arrayBuffer(),w=await at(q,r.format,r.quality);if(!w)return;E=new File(w,o,{type:r.format})}else E=new File([ne],o,{type:r.format});xe(E,D)}function c(b){i.$$.not_equal(r.format,b)&&(r.format=b,t(0,r))}function V(b){i.$$.not_equal(r.width,b)&&(r.width=b,t(0,r))}function v(b){i.$$.not_equal(r.quality,b)&&(r.quality=b,t(0,r))}function W(b){i.$$.not_equal(r.optimize,b)&&(r.optimize=b,t(0,r))}function C(b){i.$$.not_equal(r.suffix,b)&&(r.suffix=b,t(0,r))}return i.$$set=b=>{"imageFile"in b&&t(3,n=b.imageFile),"ratio"in b&&t(1,l=b.ratio),"rotation"in b&&t(4,a=b.rotation),"fileName"in b&&t(5,o=b.fileName),"variant"in b&&t(0,r=b.variant),"top"in b&&t(6,s=b.top),"left"in b&&t(7,f=b.left),"width"in b&&t(8,u=b.width),"height"in b&&t(9,p=b.height)},[r,l,h,n,a,o,s,f,u,p,c,V,v,W,C]}class yt extends Y{constructor(e){super(),K(this,e,Et,It,Z,{imageFile:3,ratio:1,rotation:4,fileName:5,variant:0,top:6,left:7,width:8,height:9})}}function ze(i,e,t){const n=i.slice();return n[12]=e[t],n}function De(i){let e,t;return e=new yt({props:{imageFile:i[3],ratio:i[1]/i[0],variant:i[12],fileName:i[8],top:i[5],left:i[6],width:i[7],rotation:i[2],height:i[7]*i[1]/i[0]}}),{c(){G(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){Q(e,n,l),t=!0},p(n,l){const a={};l&8&&(a.imageFile=n[3]),l&3&&(a.ratio=n[1]/n[0]),l&16&&(a.variant=n[12]),l&32&&(a.top=n[5]),l&64&&(a.left=n[6]),l&128&&(a.width=n[7]),l&4&&(a.rotation=n[2]),l&131&&(a.height=n[7]*n[1]/n[0]),e.$set(a)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Ft(i){let e,t,n,l,a,o,r,s,f,u,p,h,c;function V(E){i[9](E)}function v(E){i[10](E)}let W={};i[0]!==void 0&&(W.width=i[0]),i[1]!==void 0&&(W.height=i[1]),o=new Xe({props:W}),ee.push(()=>te(o,"width",V,i[0])),ee.push(()=>te(o,"height",v,i[1]));function C(E){i[11](E)}let b={};i[2]!==void 0&&(b.rotation=i[2]),u=new Ze({props:b}),ee.push(()=>te(u,"rotation",C,i[2]));let D=i[4],k=[];for(let E=0;E<D.length;E+=1)k[E]=De(ze(i,D,E));const ne=E=>B(k[E],1,1,()=>{k[E]=null});return{c(){e=F("div"),t=F("div"),n=S(i[8]),l=A(),a=F("div"),G(o.$$.fragment),f=A(),G(u.$$.fragment),h=A();for(let E=0;E<k.length;E+=1)k[E].c();this.h()},l(E){e=z(E,"DIV",{class:!0});var q=L(e);t=z(q,"DIV",{});var w=L(t);n=M(w,i[8]),w.forEach(m),l=H(q),a=z(q,"DIV",{class:!0});var j=L(a);J(o.$$.fragment,j),f=H(j),J(u.$$.fragment,j),j.forEach(m),h=H(q);for(let g=0;g<k.length;g+=1)k[g].l(q);q.forEach(m),this.h()},h(){d(a,"class","flex gap-4 items-center"),d(e,"class","flex flex-col gap-2")},m(E,q){U(E,e,q),_(e,t),_(t,n),_(e,l),_(e,a),Q(o,a,null),_(a,f),Q(u,a,null),_(e,h);for(let w=0;w<k.length;w+=1)k[w].m(e,null);c=!0},p(E,[q]){const w={};!r&&q&1&&(r=!0,w.width=E[0],ie(()=>r=!1)),!s&&q&2&&(s=!0,w.height=E[1],ie(()=>s=!1)),o.$set(w);const j={};if(!p&&q&4&&(p=!0,j.rotation=E[2],ie(()=>p=!1)),u.$set(j),q&511){D=E[4];let g;for(g=0;g<D.length;g+=1){const R=ze(E,D,g);k[g]?(k[g].p(R,q),N(k[g],1)):(k[g]=De(R),k[g].c(),N(k[g],1),k[g].m(e,null))}for(de(),g=D.length;g<k.length;g+=1)ne(g);ce()}},i(E){if(!c){N(o.$$.fragment,E),N(u.$$.fragment,E);for(let q=0;q<D.length;q+=1)N(k[q]);c=!0}},o(E){B(o.$$.fragment,E),B(u.$$.fragment,E),k=k.filter(Boolean);for(let q=0;q<k.length;q+=1)B(k[q]);c=!1},d(E){E&&m(e),X(o),X(u),Ne(k,E)}}}function zt(i){let e=i.name,t=e.lastIndexOf(".");return t!==-1&&(e=e.substring(0,t)),e}function Dt(i,e,t){let{imageFile:n}=e,{ratioWidth:l}=e,{ratioHeight:a}=e,{rotation:o}=e,{variants:r}=e,{top:s}=e,{left:f}=e,{width:u}=e;const p=zt(n);function h(v){l=v,t(0,l)}function c(v){a=v,t(1,a)}function V(v){o=v,t(2,o)}return i.$$set=v=>{"imageFile"in v&&t(3,n=v.imageFile),"ratioWidth"in v&&t(0,l=v.ratioWidth),"ratioHeight"in v&&t(1,a=v.ratioHeight),"rotation"in v&&t(2,o=v.rotation),"variants"in v&&t(4,r=v.variants),"top"in v&&t(5,s=v.top),"left"in v&&t(6,f=v.left),"width"in v&&t(7,u=v.width)},[l,a,o,n,r,s,f,u,p,h,c,V]}class qt extends Y{constructor(e){super(),K(this,e,Dt,Ft,Z,{imageFile:3,ratioWidth:0,ratioHeight:1,rotation:2,variants:4,top:5,left:6,width:7})}}function Lt(i){let e,t,n,l,a,o,r,s,f,u,p,h,c;function V(w){i[8](w)}function v(w){i[9](w)}function W(w){i[10](w)}function C(w){i[11](w)}let b={imageFile:i[0],ratio:i[5]/i[4]};i[1]!==void 0&&(b.top=i[1]),i[2]!==void 0&&(b.left=i[2]),i[3]!==void 0&&(b.width=i[3]),i[6]!==void 0&&(b.rotation=i[6]),t=new Se({props:b}),ee.push(()=>te(t,"top",V,i[1])),ee.push(()=>te(t,"left",v,i[2])),ee.push(()=>te(t,"width",W,i[3])),ee.push(()=>te(t,"rotation",C,i[6]));function D(w){i[12](w)}function k(w){i[13](w)}function ne(w){i[14](w)}function E(w){i[15](w)}let q={imageFile:i[0],top:i[1],left:i[2],width:i[3]};return i[7]!==void 0&&(q.variants=i[7]),i[4]!==void 0&&(q.ratioWidth=i[4]),i[5]!==void 0&&(q.ratioHeight=i[5]),i[6]!==void 0&&(q.rotation=i[6]),s=new qt({props:q}),ee.push(()=>te(s,"variants",D,i[7])),ee.push(()=>te(s,"ratioWidth",k,i[4])),ee.push(()=>te(s,"ratioHeight",ne,i[5])),ee.push(()=>te(s,"rotation",E,i[6])),{c(){e=F("div"),G(t.$$.fragment),r=A(),G(s.$$.fragment),this.h()},l(w){e=z(w,"DIV",{class:!0});var j=L(e);J(t.$$.fragment,j),r=H(j),J(s.$$.fragment,j),j.forEach(m),this.h()},h(){d(e,"class","flex flex-col grow gap-2")},m(w,j){U(w,e,j),Q(t,e,null),_(e,r),Q(s,e,null),c=!0},p(w,[j]){const g={};j&1&&(g.imageFile=w[0]),j&48&&(g.ratio=w[5]/w[4]),!n&&j&2&&(n=!0,g.top=w[1],ie(()=>n=!1)),!l&&j&4&&(l=!0,g.left=w[2],ie(()=>l=!1)),!a&&j&8&&(a=!0,g.width=w[3],ie(()=>a=!1)),!o&&j&64&&(o=!0,g.rotation=w[6],ie(()=>o=!1)),t.$set(g);const R={};j&1&&(R.imageFile=w[0]),j&2&&(R.top=w[1]),j&4&&(R.left=w[2]),j&8&&(R.width=w[3]),!f&&j&128&&(f=!0,R.variants=w[7],ie(()=>f=!1)),!u&&j&16&&(u=!0,R.ratioWidth=w[4],ie(()=>u=!1)),!p&&j&32&&(p=!0,R.ratioHeight=w[5],ie(()=>p=!1)),!h&&j&64&&(h=!0,R.rotation=w[6],ie(()=>h=!1)),s.$set(R)},i(w){c||(N(t.$$.fragment,w),N(s.$$.fragment,w),c=!0)},o(w){B(t.$$.fragment,w),B(s.$$.fragment,w),c=!1},d(w){w&&m(e),X(t),X(s)}}}function jt(i,e,t){let{imageFile:n}=e,l=0,a=0,o=0,r=16,s=9,f=0,u=[{width:1200,suffix:"-main",format:"image/jpeg",quality:83,optimize:!0},{width:800,suffix:"-thumb",format:"image/jpeg",quality:83,optimize:!0}];function p(D){l=D,t(1,l)}function h(D){a=D,t(2,a)}function c(D){o=D,t(3,o)}function V(D){f=D,t(6,f)}function v(D){u=D,t(7,u)}function W(D){r=D,t(4,r)}function C(D){s=D,t(5,s)}function b(D){f=D,t(6,f)}return i.$$set=D=>{"imageFile"in D&&t(0,n=D.imageFile)},[n,l,a,o,r,s,f,u,p,h,c,V,v,W,C,b]}class Vt extends Y{constructor(e){super(),K(this,e,jt,Lt,Z,{imageFile:0})}}function Pt(i){let e,t,n,l,a,o,r,s,f,u,p,h,c,V,v,W,C,b;return{c(){e=F("div"),t=F("div"),n=F("label"),l=F("div"),a=ke("svg"),o=ke("path"),r=A(),s=F("p"),f=F("span"),u=S("Click to upload"),p=S(" or drag and drop"),h=A(),c=F("p"),V=S("JPG, PNG, ... and image"),v=A(),W=F("input"),this.h()},l(D){e=z(D,"DIV",{class:!0});var k=L(e);t=z(k,"DIV",{class:!0});var ne=L(t);n=z(ne,"LABEL",{for:!0,class:!0});var E=L(n);l=z(E,"DIV",{class:!0});var q=L(l);a=Ie(q,"svg",{"aria-hidden":!0,class:!0,fill:!0,stroke:!0,viewBox:!0,xmlns:!0});var w=L(a);o=Ie(w,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),L(o).forEach(m),w.forEach(m),r=H(q),s=z(q,"P",{class:!0});var j=L(s);f=z(j,"SPAN",{class:!0});var g=L(f);u=M(g,"Click to upload"),g.forEach(m),p=M(j," or drag and drop"),j.forEach(m),h=H(q),c=z(q,"P",{class:!0});var R=L(c);V=M(R,"JPG, PNG, ... and image"),R.forEach(m),q.forEach(m),v=H(E),W=z(E,"INPUT",{id:!0,type:!0,class:!0,accept:!0}),E.forEach(m),ne.forEach(m),k.forEach(m),this.h()},h(){d(o,"stroke-linecap","round"),d(o,"stroke-linejoin","round"),d(o,"stroke-width","2"),d(o,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),d(a,"aria-hidden","true"),d(a,"class","w-10 h-10 mb-3 text-gray-400"),d(a,"fill","none"),d(a,"stroke","currentColor"),d(a,"viewBox","0 0 24 24"),d(a,"xmlns","http://www.w3.org/2000/svg"),d(f,"class","font-semibold"),d(s,"class","mb-2 text-sm text-gray-500 dark:text-gray-400"),d(c,"class","text-xs text-gray-500 dark:text-gray-400"),d(l,"class","flex flex-col items-center justify-center pt-5 pb-6"),d(W,"id",i[2]),d(W,"type","file"),d(W,"class","hidden"),d(W,"accept","image/*"),d(n,"for",i[2]),d(n,"class","flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600"),d(t,"class","flex items-center justify-center w-full max-w-xl"),d(e,"class","flex items-center justify-center grow")},m(D,k){U(D,e,k),_(e,t),_(t,n),_(n,l),_(l,a),_(a,o),_(l,r),_(l,s),_(s,f),_(f,u),_(s,p),_(l,h),_(l,c),_(c,V),_(n,v),_(n,W),C||(b=[T(W,"change",i[1]),T(n,"drop",i[0]),T(n,"dragover",Rt)],C=!0)},p:O,i:O,o:O,d(D){D&&m(e),C=!1,fe(b)}}}function Rt(i){i.preventDefault()}function Ut(i){const e=We();function t(a){if(a.preventDefault(),console.log(a),!a.dataTransfer)return;console.log("1");let o=null;if(a.dataTransfer.items){const r=[...a.dataTransfer.items];for(let s of r)if(s.kind==="file"){const f=s.getAsFile();f&&(o=f);break}}else{const r=[...a.dataTransfer.files];r.length>0&&(o=r[0])}o&&e("selected",{file:o})}function n(a){if(a.currentTarget.files&&a.currentTarget.files.length){const[o]=a.currentTarget.files;e("selected",{file:o})}}let l=crypto.randomUUID();return[t,n,l]}class Tt extends Y{constructor(e){super(),K(this,e,Ut,Pt,Z,{})}}function qe(i){let e,t;return e=new Tt({}),e.$on("selected",i[1]),{c(){G(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){Q(e,n,l),t=!0},p:O,i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Le(i){let e,t;return e=new Vt({props:{imageFile:i[0].imageFile}}),{c(){G(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,l){Q(e,n,l),t=!0},p(n,l){const a={};l&1&&(a.imageFile=n[0].imageFile),e.$set(a)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Nt(i){let e,t,n,l=!i[0].imageFile&&qe(i),a=i[0].imageFile&&Le(i);return{c(){e=F("div"),l&&l.c(),t=A(),a&&a.c(),this.h()},l(o){e=z(o,"DIV",{class:!0});var r=L(e);l&&l.l(r),t=H(r),a&&a.l(r),r.forEach(m),this.h()},h(){d(e,"class","flex flex-col flex-grow")},m(o,r){U(o,e,r),l&&l.m(e,null),_(e,t),a&&a.m(e,null),n=!0},p(o,[r]){o[0].imageFile?l&&(de(),B(l,1,1,()=>{l=null}),ce()):l?(l.p(o,r),r&1&&N(l,1)):(l=qe(o),l.c(),N(l,1),l.m(e,t)),o[0].imageFile?a?(a.p(o,r),r&1&&N(a,1)):(a=Le(o),a.c(),N(a,1),a.m(e,null)):a&&(de(),B(a,1,1,()=>{a=null}),ce())},i(o){n||(N(l),N(a),n=!0)},o(o){B(l),B(a),n=!1},d(o){o&&m(e),l&&l.d(),a&&a.d()}}}function Wt(i,e,t){let n={};function l(a){t(0,n.imageFile=a.detail.file,n)}return[n,l]}class At extends Y{constructor(e){super(),K(this,e,Wt,Nt,Z,{})}}function Ht(i){let e,t;return{c(){e=F("h6"),t=S("© 2022 Invemo LLC, All Rights Reserved"),this.h()},l(n){e=z(n,"H6",{class:!0});var l=L(e);t=M(l,"© 2022 Invemo LLC, All Rights Reserved"),l.forEach(m),this.h()},h(){d(e,"class","text-sm")},m(n,l){U(n,e,l),_(e,t)},p:O,i:O,o:O,d(n){n&&m(e)}}}class Bt extends Y{constructor(e){super(),K(this,e,null,Ht,Z,{})}}function Ot(i){let e,t,n,l,a,o,r;return t=new He({}),l=new At({}),o=new Bt({}),{c(){e=F("div"),G(t.$$.fragment),n=A(),G(l.$$.fragment),a=A(),G(o.$$.fragment),this.h()},l(s){e=z(s,"DIV",{class:!0});var f=L(e);J(t.$$.fragment,f),n=H(f),J(l.$$.fragment,f),a=H(f),J(o.$$.fragment,f),f.forEach(m),this.h()},h(){d(e,"class","w-full min-h-screen bg-gray-50 dark:bg-gray-900 dark:text-gray-50 flex flex-col p-2")},m(s,f){U(s,e,f),Q(t,e,null),_(e,n),Q(l,e,null),_(e,a),Q(o,e,null),r=!0},p:O,i(s){r||(N(t.$$.fragment,s),N(l.$$.fragment,s),N(o.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),B(l.$$.fragment,s),B(o.$$.fragment,s),r=!1},d(s){s&&m(e),X(t),X(l),X(o)}}}class Mt extends Y{constructor(e){super(),K(this,e,null,Ot,Z,{})}}export{Mt as default};
