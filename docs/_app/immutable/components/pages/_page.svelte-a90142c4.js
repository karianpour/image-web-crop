import{S as Z,i as $,s as x,k as D,q as O,l as y,m as L,r as q,h as p,n as m,b as T,G as b,B as M,o as je,a as N,c as A,I as de,p as V,J as W,K as se,C as Le,D as ze,E as Ve,F as Re,f as H,t as B,L as Ee,w as X,x as Y,y as K,u as re,z as Q,M as oe,N as Fe,O as ee,P as te,Q as ie,g as ue,d as he,R as Pe,T as ce,U as me,V as Ue}from"../../chunks/index-9d90608e.js";function Te(i){let e,t;return{c(){e=D("h1"),t=O("Image Crop and resize for the Web"),this.h()},l(n){e=y(n,"H1",{class:!0});var r=L(e);t=q(r,"Image Crop and resize for the Web"),r.forEach(p),this.h()},h(){m(e,"class","text-sm")},m(n,r){T(n,e,r),b(e,t)},p:M,i:M,o:M,d(n){n&&p(e)}}}class We extends Z{constructor(e){super(),$(this,e,null,Te,x,{})}}function pe(i){let e,t,n,r,a,l,o=i[0]&&_e(i);return{c(){e=D("div"),t=D("img"),r=N(),o&&o.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var s=L(e);t=y(s,"IMG",{src:!0,id:!0,class:!0,alt:!0,style:!0}),r=A(s),o&&o.l(s),s.forEach(p),this.h()},h(){de(t.src,n=i[2])||m(t,"src",n),m(t,"id","main-image"),m(t,"class","object-contain w-fit max-h-[50vh]"),m(t,"alt",""),V(t,"transform","rotate("+i[1]+"deg)"),m(e,"class","w-fit h-fit justify-center relative")},m(f,s){T(f,e,s),b(e,t),b(e,r),o&&o.m(e,null),a||(l=W(t,"load",i[7]),a=!0)},p(f,s){s&4&&!de(t.src,n=f[2])&&m(t,"src",n),s&2&&V(t,"transform","rotate("+f[1]+"deg)"),f[0]?o?o.p(f,s):(o=_e(f),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(f){f&&p(e),o&&o.d(),a=!1,l()}}}function _e(i){let e,t,n,r,a,l,o,f,s,c,w;return{c(){e=D("div"),t=N(),n=D("div"),r=N(),a=D("div"),l=N(),o=D("div"),f=N(),s=D("div"),this.h()},l(u){e=y(u,"DIV",{class:!0,style:!0,"data-whole":!0}),L(e).forEach(p),t=A(u),n=y(u,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(n).forEach(p),r=A(u),a=y(u,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(a).forEach(p),l=A(u),o=y(u,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(o).forEach(p),f=A(u),s=y(u,"DIV",{class:!0,style:!0,"data-north":!0,"data-west":!0}),L(s).forEach(p),this.h()},h(){m(e,"class","absolute border-2 border-dashed border-slate-300 cursor-move"),V(e,"top",i[6]+"px"),V(e,"left",i[5]+"px"),V(e,"width",i[4]+"px"),V(e,"height",i[3]+"px"),m(e,"data-whole","true"),m(n,"class","absolute bg-sky-700 cursor-se-resize"),V(n,"top",i[6]-G+"px"),V(n,"left",i[5]-G+"px"),V(n,"width",J+"px"),V(n,"height",J+"px"),m(n,"data-north","true"),m(n,"data-west","true"),m(a,"class","absolute bg-sky-700 cursor-sw-resize"),V(a,"top",i[6]-G+"px"),V(a,"left",i[5]+i[4]-J+G+"px"),V(a,"width",J+"px"),V(a,"height",J+"px"),m(a,"data-north","true"),m(a,"data-west","false"),m(o,"class","absolute bg-sky-700 cursor-nw-resize"),V(o,"top",i[6]+i[3]-J+G+"px"),V(o,"left",i[5]+i[4]-J+G+"px"),V(o,"width",J+"px"),V(o,"height",J+"px"),m(o,"data-north","false"),m(o,"data-west","false"),m(s,"class","absolute bg-sky-700 cursor-ne-resize"),V(s,"top",i[6]+i[3]-J+G+"px"),V(s,"left",i[5]-G+"px"),V(s,"width",J+"px"),V(s,"height",J+"px"),m(s,"data-north","false"),m(s,"data-west","true")},m(u,g){T(u,e,g),T(u,t,g),T(u,n,g),T(u,r,g),T(u,a,g),T(u,l,g),T(u,o,g),T(u,f,g),T(u,s,g),c||(w=[W(e,"pointerdown",i[8]),W(e,"pointermove",i[9]),W(e,"pointerup",i[10]),W(n,"pointerdown",i[8]),W(n,"pointermove",i[9]),W(n,"pointerup",i[10]),W(a,"pointerdown",i[8]),W(a,"pointermove",i[9]),W(a,"pointerup",i[10]),W(o,"pointerdown",i[8]),W(o,"pointermove",i[9]),W(o,"pointerup",i[10]),W(s,"pointerdown",i[8]),W(s,"pointermove",i[9]),W(s,"pointerup",i[10])],c=!0)},p(u,g){g&64&&V(e,"top",u[6]+"px"),g&32&&V(e,"left",u[5]+"px"),g&16&&V(e,"width",u[4]+"px"),g&8&&V(e,"height",u[3]+"px"),g&64&&V(n,"top",u[6]-G+"px"),g&32&&V(n,"left",u[5]-G+"px"),g&64&&V(a,"top",u[6]-G+"px"),g&48&&V(a,"left",u[5]+u[4]-J+G+"px"),g&72&&V(o,"top",u[6]+u[3]-J+G+"px"),g&48&&V(o,"left",u[5]+u[4]-J+G+"px"),g&72&&V(s,"top",u[6]+u[3]-J+G+"px"),g&32&&V(s,"left",u[5]-G+"px")},d(u){u&&p(e),u&&p(t),u&&p(n),u&&p(r),u&&p(a),u&&p(l),u&&p(o),u&&p(f),u&&p(s),c=!1,se(w)}}}function He(i){let e,t=i[2]&&pe(i);return{c(){e=D("div"),t&&t.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var r=L(e);t&&t.l(r),r.forEach(p),this.h()},h(){m(e,"class","flex flex-grow flex-col justify-center items-center p-2")},m(n,r){T(n,e,r),t&&t.m(e,null)},p(n,[r]){n[2]?t?t.p(n,r):(t=pe(n),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:M,o:M,d(n){n&&p(e),t&&t.d()}}}const G=3,J=10;function Ne(i,e,t){let n,r,a,l,{imageFile:o}=e,{top:f}=e,{left:s}=e,{width:c}=e,{ratio:w}=e,{rotation:u}=e,g=1,R,I,v;je(()=>{if(FileReader){const d=new FileReader;d.onload=function(){typeof d.result=="string"&&t(2,v=d.result)},d.readAsDataURL(o)}else console.error("FileRreader is not supported in thios browser!")});let C;function S(d){const P=d.currentTarget;C=new ResizeObserver(ne=>{E(ne[0].target)}),C.observe(P)}function E(d){t(15,g=d.offsetWidth/d.naturalWidth),console.log(g),R=d.naturalWidth,I=d.naturalHeight;const P=I/R;if(w<=P){t(0,c=R);const ne=c*w;t(12,s=0),t(11,f=(I-ne)/2)}else t(0,c=I/w),t(12,s=(R-c)/2),t(11,f=0)}let h={active:!1,top:0,left:0,width:0,height:0,offset:{x:0,y:0}};function U(d){d.stopPropagation(),d.preventDefault();const P=d.currentTarget,ne=d.clientX,ae=d.clientY;P.setPointerCapture(d.pointerId),h={...h,active:!0,top:f,left:s,width:c,height:c*w,offset:{x:ne,y:ae}}}function k(d){const P=d.clientX,ne=d.clientY;if(h.active){const ae=d.currentTarget,le=(P-h.offset.x)/g,z=(ne-h.offset.y)/g,De=ae.dataset.north==="true",ye=ae.dataset.west==="true";ae.dataset.whole==="true"?_(z,le):j(z,le,De,ye)}}function F(d){d.stopPropagation(),d.preventDefault(),h={...h,active:!1}}function _(d,P){t(11,f=h.top+d),t(12,s=h.left+P),f<0&&t(11,f=0),s<0&&t(12,s=0),s+c>R&&t(12,s=R-c),f+c*w>I&&t(11,f=I-c*w)}function j(d,P,ne,ae){let le=c*w;const z={top:f,left:s,width:c,height:le};d<P?(ne?(z.top=h.top+d,z.height=h.width*w-d):(z.height=h.width*w+d,z.top=h.top),ae?(z.width=z.height/w,z.left=h.left+h.width-z.width):(z.width=z.height/w,z.left=h.left)):(ae?(z.left=h.left+P,z.width=h.width-P):(z.width=h.width+P,z.left=h.left),ne?(z.height=z.width*w,z.top=h.top+h.height-z.height):z.top=h.top),z.height=z.width*w,z.top>=0&&z.top+z.height<=I&&s>=0&&z.left+z.width<=R&&(t(11,f=z.top),t(12,s=z.left),t(0,c=z.width),le=z.height)}return i.$$set=d=>{"imageFile"in d&&t(13,o=d.imageFile),"top"in d&&t(11,f=d.top),"left"in d&&t(12,s=d.left),"width"in d&&t(0,c=d.width),"ratio"in d&&t(14,w=d.ratio),"rotation"in d&&t(1,u=d.rotation)},i.$$.update=()=>{if(i.$$.dirty&16384&&w){const d=document.getElementById("main-image");d&&d.src&&E(d)}i.$$.dirty&34816&&t(6,n=f*g),i.$$.dirty&36864&&t(5,r=s*g),i.$$.dirty&32769&&t(4,a=c*g),i.$$.dirty&49153&&t(3,l=c*w*g)},[c,u,v,l,a,r,n,S,U,k,F,f,s,o,w,g]}class Ae extends Z{constructor(e){super(),$(this,e,Ne,He,x,{imageFile:13,top:11,left:12,width:0,ratio:14,rotation:1})}}function Be(i){let e,t,n,r;const a=i[1].default,l=Le(a,i,i[0],null);return{c(){e=D("button"),l&&l.c(),this.h()},l(o){e=y(o,"BUTTON",{type:!0,class:!0});var f=L(e);l&&l.l(f),f.forEach(p),this.h()},h(){m(e,"type","button"),m(e,"class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 dark:bg-blue-700 dark:hover:bg-blue-900 focus:outline-none dark:focus:ring-blue-800")},m(o,f){T(o,e,f),l&&l.m(e,null),t=!0,n||(r=W(e,"click",i[2]),n=!0)},p(o,[f]){l&&l.p&&(!t||f&1)&&ze(l,a,o,o[0],t?Re(a,o[0],f,null):Ve(o[0]),null)},i(o){t||(H(l,o),t=!0)},o(o){B(l,o),t=!1},d(o){o&&p(e),l&&l.d(o),n=!1,r()}}}function Se(i,e,t){let{$$slots:n={},$$scope:r}=e;function a(l){Ee.call(this,i,l)}return i.$$set=l=>{"$$scope"in l&&t(0,r=l.$$scope)},[r,n,a]}class ge extends Z{constructor(e){super(),$(this,e,Se,Be,x,{})}}function Oe(i){let e;return{c(){e=O("change")},l(t){e=q(t,"change")},m(t,n){T(t,e,n)},d(t){t&&p(e)}}}function qe(i){let e,t,n,r,a,l,o;return l=new ge({props:{$$slots:{default:[Oe]},$$scope:{ctx:i}}}),l.$on("click",i[2]),{c(){e=D("div"),t=O(i[0]),n=O(":"),r=O(i[1]),a=N(),X(l.$$.fragment)},l(f){e=y(f,"DIV",{});var s=L(e);t=q(s,i[0]),n=q(s,":"),r=q(s,i[1]),a=A(s),Y(l.$$.fragment,s),s.forEach(p)},m(f,s){T(f,e,s),b(e,t),b(e,n),b(e,r),b(e,a),K(l,e,null),o=!0},p(f,[s]){(!o||s&1)&&re(t,f[0]),(!o||s&2)&&re(r,f[1]);const c={};s&16&&(c.$$scope={dirty:s,ctx:f}),l.$set(c)},i(f){o||(H(l.$$.fragment,f),o=!0)},o(f){B(l.$$.fragment,f),o=!1},d(f){f&&p(e),Q(l)}}}function Me(i,e,t){let{width:n}=e,{height:r}=e;const a=[{width:16,height:9},{width:4,height:3},{width:2,height:1},{width:1,height:1}];function l(){const o=a.findIndex(s=>s.width===n&&s.height===r);let f=0;o<a.length-1&&(f=o+1),t(0,n=a[f].width),t(1,r=a[f].height)}return i.$$set=o=>{"width"in o&&t(0,n=o.width),"height"in o&&t(1,r=o.height)},[n,r,l]}class Ce extends Z{constructor(e){super(),$(this,e,Me,qe,x,{width:0,height:1})}}function Ge(i){let e,t,n,r,a,l,o,f;return{c(){e=D("label"),t=D("div"),n=O(i[0]),r=O(" deg"),a=N(),l=D("input"),this.h()},l(s){e=y(s,"LABEL",{class:!0});var c=L(e);t=y(c,"DIV",{class:!0});var w=L(t);n=q(w,i[0]),r=q(w," deg"),w.forEach(p),a=A(c),l=y(c,"INPUT",{type:!0,min:!0,max:!0,step:!0}),c.forEach(p),this.h()},h(){m(t,"class",""),m(l,"type","range"),m(l,"min","-45"),m(l,"max","45"),m(l,"step","0.5"),m(e,"class","flex flex-col items-center")},m(s,c){T(s,e,c),b(e,t),b(t,n),b(t,r),b(e,a),b(e,l),oe(l,i[0]),o||(f=[W(l,"change",i[1]),W(l,"input",i[1])],o=!0)},p(s,[c]){c&1&&re(n,s[0]),c&1&&oe(l,s[0])},i:M,o:M,d(s){s&&p(e),o=!1,se(f)}}}function Je(i,e,t){let{rotation:n}=e;function r(){n=Fe(this.value),t(0,n)}return i.$$set=a=>{"rotation"in a&&t(0,n=a.rotation)},[n,r]}class Xe extends Z{constructor(e){super(),$(this,e,Je,Ge,x,{rotation:0})}}const fe=["image/jpeg","image/png"];function Ye(i){return i==="image/jpeg"?"jpg":i==="image/png"?"png":""}function Ke(i,e){const t=window.URL.createObjectURL(i),n=document.createElement("a");n.style.display="none",n.href=t,n.download=e,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t)}const Qe=i=>new Promise((e,t)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",r=>t(r)),n.setAttribute("crossOrigin","anonymous"),n.src=i});function Ze(i){return i*Math.PI/180}async function $e(i,e,t,n=0,r,a,l){const o=await Qe(i),f=document.createElement("canvas"),s=f.getContext("2d");if(!s)return null;const c=Math.max(o.width,o.height),w=2*(c/2*Math.sqrt(2)),u=2*(c/2*Math.sqrt(2)),g=t/e.width;f.width=w,f.height=u,r==="image/jpeg"&&(s.fillStyle=l,s.fillRect(0,0,f.width,f.height)),s.translate(w/2,u/2),s.scale(g,g),s.rotate(Ze(n)),s.translate(-o.width/2,-o.height/2),s.drawImage(o,0,0),s.setTransform(1,0,0,1,0,0);const R=s.getImageData(w/2-o.width*g/2+e.left*g,u/2-o.height*g/2+e.top*g,e.width*g,e.height*g);return f.width=e.width*g,f.height=e.height*g,r==="image/jpeg"&&(s.fillStyle=l,s.fillRect(0,0,f.width,f.height)),s.putImageData(R,0,0),new Promise(I=>{f.toBlob(v=>{I(v)},r,a)})}const xe=`
    importScripts('https://unpkg.com/mozjpeg-js', 'https://cdn.rawgit.com/psych0der/pngquantjs/master/demo/js/pngquant.min.js');
    onmessage = function(event) {
        const {args, type, data} = event.data, 
            optimize = type=='image/png' ? pngquant : mozjpeg.encode;
        const result = optimize(data, args, console.log);
        postMessage(result);
    };
`,we=URL.createObjectURL(new Blob([xe],{type:"application/javascript"}));async function et(i,e){if(!we)return;const t=new Worker(we),n=new Promise(a=>{t.onmessage=l=>{a([l.data.data]),t.terminate()}});return t.postMessage({data:new Uint8Array(i),type:e}),await n}function tt(i){let e;return{c(){e=O("change")},l(t){e=q(t,"change")},m(t,n){T(t,e,n)},d(t){t&&p(e)}}}function it(i){let e,t,n,r,a;return r=new ge({props:{$$slots:{default:[tt]},$$scope:{ctx:i}}}),r.$on("click",i[1]),{c(){e=D("div"),t=O(i[0]),n=N(),X(r.$$.fragment),this.h()},l(l){e=y(l,"DIV",{class:!0});var o=L(e);t=q(o,i[0]),n=A(o),Y(r.$$.fragment,o),o.forEach(p),this.h()},h(){m(e,"class","flex flex-col items-center")},m(l,o){T(l,e,o),b(e,t),b(e,n),K(r,e,null),a=!0},p(l,[o]){(!a||o&1)&&re(t,l[0]);const f={};o&4&&(f.$$scope={dirty:o,ctx:l}),r.$set(f)},i(l){a||(H(r.$$.fragment,l),a=!0)},o(l){B(r.$$.fragment,l),a=!1},d(l){l&&p(e),Q(r)}}}function nt(i,e,t){let{value:n="image/jpeg"}=e;function r(){const a=fe.findIndex(o=>o===n);let l=0;a<fe.length-1&&(l=a+1),t(0,n=fe[l])}return i.$$set=a=>{"value"in a&&t(0,n=a.value)},[n,r]}class at extends Z{constructor(e){super(),$(this,e,nt,it,x,{value:0})}}function rt(i){let e,t,n,r,a,l=i[0]*i[1]+"",o,f,s,c,w;return{c(){e=D("div"),t=D("label"),n=D("div"),r=O(i[0]),a=O(" / "),o=O(l),f=N(),s=D("input"),this.h()},l(u){e=y(u,"DIV",{class:!0});var g=L(e);t=y(g,"LABEL",{});var R=L(t);n=y(R,"DIV",{class:!0});var I=L(n);r=q(I,i[0]),a=q(I," / "),o=q(I,l),I.forEach(p),f=A(R),s=y(R,"INPUT",{type:!0,min:!0,max:!0,step:!0}),R.forEach(p),g.forEach(p),this.h()},h(){m(n,"class",""),m(s,"type","range"),m(s,"min","100"),m(s,"max","2000"),m(s,"step","10"),m(e,"class","flex flex-col")},m(u,g){T(u,e,g),b(e,t),b(t,n),b(n,r),b(n,a),b(n,o),b(t,f),b(t,s),oe(s,i[0]),c||(w=[W(s,"change",i[2]),W(s,"input",i[2])],c=!0)},p(u,[g]){g&1&&re(r,u[0]),g&3&&l!==(l=u[0]*u[1]+"")&&re(o,l),g&1&&oe(s,u[0])},i:M,o:M,d(u){u&&p(e),c=!1,se(w)}}}function ot(i,e,t){let{ratio:n}=e,{width:r}=e;function a(){r=Fe(this.value),t(0,r)}return i.$$set=l=>{"ratio"in l&&t(1,n=l.ratio),"width"in l&&t(0,r=l.width)},[r,n,a]}class lt extends Z{constructor(e){super(),$(this,e,ot,rt,x,{ratio:1,width:0})}}function st(i){let e,t,n,r,a,l,o;return{c(){e=D("div"),t=D("label"),n=O(i[1]),r=N(),a=D("input"),this.h()},l(f){e=y(f,"DIV",{class:!0});var s=L(e);t=y(s,"LABEL",{for:!0,class:!0});var c=L(t);n=q(c,i[1]),c.forEach(p),r=A(s),a=y(s,"INPUT",{type:!0,id:!0,class:!0}),s.forEach(p),this.h()},h(){m(t,"for",i[2]),m(t,"class","block text-sm font-medium text-gray-900 dark:text-white"),m(a,"type","text"),m(a,"id",i[2]),m(a,"class","block w-full p-1 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),m(e,"class","grow flex flex-col items-center gap-1")},m(f,s){T(f,e,s),b(e,t),b(t,n),b(e,r),b(e,a),oe(a,i[0]),l||(o=[W(a,"input",i[4]),W(a,"click",i[3])],l=!0)},p(f,[s]){s&2&&re(n,f[1]),s&1&&a.value!==f[0]&&oe(a,f[0])},i:M,o:M,d(f){f&&p(e),l=!1,se(o)}}}function ft(i,e,t){let{value:n=""}=e,{label:r=""}=e;const a=crypto.randomUUID();function l(f){Ee.call(this,i,f)}function o(){n=this.value,t(0,n)}return i.$$set=f=>{"value"in f&&t(0,n=f.value),"label"in f&&t(1,r=f.label)},[n,r,a,l,o]}class ut extends Z{constructor(e){super(),$(this,e,ft,st,x,{value:0,label:1})}}function ht(i){let e;return{c(){e=O("Download")},l(t){e=q(t,"Download")},m(t,n){T(t,e,n)},d(t){t&&p(e)}}}function gt(i){let e,t,n,r,a,l,o,f,s,c,w,u,g;function R(h){i[10](h)}let I={};i[0].format!==void 0&&(I.value=i[0].format),t=new at({props:I}),ee.push(()=>te(t,"value",R,i[0].format));function v(h){i[11](h)}let C={ratio:i[1]};i[0].width!==void 0&&(C.width=i[0].width),a=new lt({props:C}),ee.push(()=>te(a,"width",v,i[0].width));function S(h){i[12](h)}let E={label:"Suffix"};return i[0].suffix!==void 0&&(E.value=i[0].suffix),s=new ut({props:E}),ee.push(()=>te(s,"value",S,i[0].suffix)),u=new ge({props:{$$slots:{default:[ht]},$$scope:{ctx:i}}}),u.$on("click",i[2]),{c(){e=D("div"),X(t.$$.fragment),r=N(),X(a.$$.fragment),o=N(),f=D("div"),X(s.$$.fragment),w=N(),X(u.$$.fragment),this.h()},l(h){e=y(h,"DIV",{class:!0});var U=L(e);Y(t.$$.fragment,U),r=A(U),Y(a.$$.fragment,U),o=A(U),f=y(U,"DIV",{class:!0});var k=L(f);Y(s.$$.fragment,k),k.forEach(p),U.forEach(p),w=A(h),Y(u.$$.fragment,h),this.h()},h(){m(f,"class","flex grow max-w-[10rem]"),m(e,"class","flex flex-row items-center gap-2")},m(h,U){T(h,e,U),K(t,e,null),b(e,r),K(a,e,null),b(e,o),b(e,f),K(s,f,null),T(h,w,U),K(u,h,U),g=!0},p(h,[U]){const k={};!n&&U&1&&(n=!0,k.value=h[0].format,ie(()=>n=!1)),t.$set(k);const F={};U&2&&(F.ratio=h[1]),!l&&U&1&&(l=!0,F.width=h[0].width,ie(()=>l=!1)),a.$set(F);const _={};!c&&U&1&&(c=!0,_.value=h[0].suffix,ie(()=>c=!1)),s.$set(_);const j={};U&8192&&(j.$$scope={dirty:U,ctx:h}),u.$set(j)},i(h){g||(H(t.$$.fragment,h),H(a.$$.fragment,h),H(s.$$.fragment,h),H(u.$$.fragment,h),g=!0)},o(h){B(t.$$.fragment,h),B(a.$$.fragment,h),B(s.$$.fragment,h),B(u.$$.fragment,h),g=!1},d(h){h&&p(e),Q(t),Q(a),Q(s),h&&p(w),Q(u,h)}}}function dt(i,e,t){let{imageFile:n}=e,{ratio:r}=e,{rotation:a}=e,{fileName:l}=e,{variant:o}=e,{top:f}=e,{left:s}=e,{width:c}=e,{height:w}=e;async function u(){const v=Ye(o.format),C=l+o.suffix+"."+v,S=URL.createObjectURL(n),E=await $e(S,{width:c,height:w,top:f,left:s},o.width,a,o.format,85,"#fff");if(!E)return;const h=await E.arrayBuffer(),U=await et(h,o.format);if(!U)return;const k=new File(U,l,{type:o.format});Ke(k,C)}function g(v){i.$$.not_equal(o.format,v)&&(o.format=v,t(0,o))}function R(v){i.$$.not_equal(o.width,v)&&(o.width=v,t(0,o))}function I(v){i.$$.not_equal(o.suffix,v)&&(o.suffix=v,t(0,o))}return i.$$set=v=>{"imageFile"in v&&t(3,n=v.imageFile),"ratio"in v&&t(1,r=v.ratio),"rotation"in v&&t(4,a=v.rotation),"fileName"in v&&t(5,l=v.fileName),"variant"in v&&t(0,o=v.variant),"top"in v&&t(6,f=v.top),"left"in v&&t(7,s=v.left),"width"in v&&t(8,c=v.width),"height"in v&&t(9,w=v.height)},[o,r,u,n,a,l,f,s,c,w,g,R,I]}class ct extends Z{constructor(e){super(),$(this,e,dt,gt,x,{imageFile:3,ratio:1,rotation:4,fileName:5,variant:0,top:6,left:7,width:8,height:9})}}function be(i,e,t){const n=i.slice();return n[12]=e[t],n}function ve(i){let e,t;return e=new ct({props:{imageFile:i[3],ratio:i[1]/i[0],variant:i[12],fileName:i[8],top:i[5],left:i[6],width:i[7],rotation:i[2],height:i[7]*i[1]/i[0]}}),{c(){X(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const a={};r&8&&(a.imageFile=n[3]),r&3&&(a.ratio=n[1]/n[0]),r&16&&(a.variant=n[12]),r&32&&(a.top=n[5]),r&64&&(a.left=n[6]),r&128&&(a.width=n[7]),r&4&&(a.rotation=n[2]),r&131&&(a.height=n[7]*n[1]/n[0]),e.$set(a)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function mt(i){let e,t,n,r,a,l,o,f,s,c,w,u,g;function R(k){i[9](k)}function I(k){i[10](k)}let v={};i[0]!==void 0&&(v.width=i[0]),i[1]!==void 0&&(v.height=i[1]),l=new Ce({props:v}),ee.push(()=>te(l,"width",R,i[0])),ee.push(()=>te(l,"height",I,i[1]));function C(k){i[11](k)}let S={};i[2]!==void 0&&(S.rotation=i[2]),c=new Xe({props:S}),ee.push(()=>te(c,"rotation",C,i[2]));let E=i[4],h=[];for(let k=0;k<E.length;k+=1)h[k]=ve(be(i,E,k));const U=k=>B(h[k],1,1,()=>{h[k]=null});return{c(){e=D("div"),t=D("div"),n=O(i[8]),r=N(),a=D("div"),X(l.$$.fragment),s=N(),X(c.$$.fragment),u=N();for(let k=0;k<h.length;k+=1)h[k].c();this.h()},l(k){e=y(k,"DIV",{class:!0});var F=L(e);t=y(F,"DIV",{});var _=L(t);n=q(_,i[8]),_.forEach(p),r=A(F),a=y(F,"DIV",{class:!0});var j=L(a);Y(l.$$.fragment,j),s=A(j),Y(c.$$.fragment,j),j.forEach(p),u=A(F);for(let d=0;d<h.length;d+=1)h[d].l(F);F.forEach(p),this.h()},h(){m(a,"class","flex gap-4 items-center"),m(e,"class","flex flex-col gap-2")},m(k,F){T(k,e,F),b(e,t),b(t,n),b(e,r),b(e,a),K(l,a,null),b(a,s),K(c,a,null),b(e,u);for(let _=0;_<h.length;_+=1)h[_].m(e,null);g=!0},p(k,[F]){const _={};!o&&F&1&&(o=!0,_.width=k[0],ie(()=>o=!1)),!f&&F&2&&(f=!0,_.height=k[1],ie(()=>f=!1)),l.$set(_);const j={};if(!w&&F&4&&(w=!0,j.rotation=k[2],ie(()=>w=!1)),c.$set(j),F&511){E=k[4];let d;for(d=0;d<E.length;d+=1){const P=be(k,E,d);h[d]?(h[d].p(P,F),H(h[d],1)):(h[d]=ve(P),h[d].c(),H(h[d],1),h[d].m(e,null))}for(ue(),d=E.length;d<h.length;d+=1)U(d);he()}},i(k){if(!g){H(l.$$.fragment,k),H(c.$$.fragment,k);for(let F=0;F<E.length;F+=1)H(h[F]);g=!0}},o(k){B(l.$$.fragment,k),B(c.$$.fragment,k),h=h.filter(Boolean);for(let F=0;F<h.length;F+=1)B(h[F]);g=!1},d(k){k&&p(e),Q(l),Q(c),Pe(h,k)}}}function pt(i){let e=i.name,t=e.lastIndexOf(".");return t!==-1&&(e=e.substring(0,t)),e}function _t(i,e,t){let{imageFile:n}=e,{ratioWidth:r}=e,{ratioHeight:a}=e,{rotation:l}=e,{variants:o}=e,{top:f}=e,{left:s}=e,{width:c}=e;const w=pt(n);function u(I){r=I,t(0,r)}function g(I){a=I,t(1,a)}function R(I){l=I,t(2,l)}return i.$$set=I=>{"imageFile"in I&&t(3,n=I.imageFile),"ratioWidth"in I&&t(0,r=I.ratioWidth),"ratioHeight"in I&&t(1,a=I.ratioHeight),"rotation"in I&&t(2,l=I.rotation),"variants"in I&&t(4,o=I.variants),"top"in I&&t(5,f=I.top),"left"in I&&t(6,s=I.left),"width"in I&&t(7,c=I.width)},[r,a,l,n,o,f,s,c,w,u,g,R]}class wt extends Z{constructor(e){super(),$(this,e,_t,mt,x,{imageFile:3,ratioWidth:0,ratioHeight:1,rotation:2,variants:4,top:5,left:6,width:7})}}function bt(i){let e,t,n,r,a,l,o,f,s,c,w,u,g;function R(_){i[8](_)}function I(_){i[9](_)}function v(_){i[10](_)}function C(_){i[11](_)}let S={imageFile:i[0],ratio:i[5]/i[4]};i[1]!==void 0&&(S.top=i[1]),i[2]!==void 0&&(S.left=i[2]),i[3]!==void 0&&(S.width=i[3]),i[6]!==void 0&&(S.rotation=i[6]),t=new Ae({props:S}),ee.push(()=>te(t,"top",R,i[1])),ee.push(()=>te(t,"left",I,i[2])),ee.push(()=>te(t,"width",v,i[3])),ee.push(()=>te(t,"rotation",C,i[6]));function E(_){i[12](_)}function h(_){i[13](_)}function U(_){i[14](_)}function k(_){i[15](_)}let F={imageFile:i[0],top:i[1],left:i[2],width:i[3]};return i[7]!==void 0&&(F.variants=i[7]),i[4]!==void 0&&(F.ratioWidth=i[4]),i[5]!==void 0&&(F.ratioHeight=i[5]),i[6]!==void 0&&(F.rotation=i[6]),f=new wt({props:F}),ee.push(()=>te(f,"variants",E,i[7])),ee.push(()=>te(f,"ratioWidth",h,i[4])),ee.push(()=>te(f,"ratioHeight",U,i[5])),ee.push(()=>te(f,"rotation",k,i[6])),{c(){e=D("div"),X(t.$$.fragment),o=N(),X(f.$$.fragment),this.h()},l(_){e=y(_,"DIV",{class:!0});var j=L(e);Y(t.$$.fragment,j),o=A(j),Y(f.$$.fragment,j),j.forEach(p),this.h()},h(){m(e,"class","flex flex-col grow gap-2")},m(_,j){T(_,e,j),K(t,e,null),b(e,o),K(f,e,null),g=!0},p(_,[j]){const d={};j&1&&(d.imageFile=_[0]),j&48&&(d.ratio=_[5]/_[4]),!n&&j&2&&(n=!0,d.top=_[1],ie(()=>n=!1)),!r&&j&4&&(r=!0,d.left=_[2],ie(()=>r=!1)),!a&&j&8&&(a=!0,d.width=_[3],ie(()=>a=!1)),!l&&j&64&&(l=!0,d.rotation=_[6],ie(()=>l=!1)),t.$set(d);const P={};j&1&&(P.imageFile=_[0]),j&2&&(P.top=_[1]),j&4&&(P.left=_[2]),j&8&&(P.width=_[3]),!s&&j&128&&(s=!0,P.variants=_[7],ie(()=>s=!1)),!c&&j&16&&(c=!0,P.ratioWidth=_[4],ie(()=>c=!1)),!w&&j&32&&(w=!0,P.ratioHeight=_[5],ie(()=>w=!1)),!u&&j&64&&(u=!0,P.rotation=_[6],ie(()=>u=!1)),f.$set(P)},i(_){g||(H(t.$$.fragment,_),H(f.$$.fragment,_),g=!0)},o(_){B(t.$$.fragment,_),B(f.$$.fragment,_),g=!1},d(_){_&&p(e),Q(t),Q(f)}}}function vt(i,e,t){let{imageFile:n}=e,r=0,a=0,l=0,o=16,f=9,s=0,c=[{width:1200,suffix:"-main",format:"image/jpeg"},{width:800,suffix:"-thumb",format:"image/jpeg"}];function w(E){r=E,t(1,r)}function u(E){a=E,t(2,a)}function g(E){l=E,t(3,l)}function R(E){s=E,t(6,s)}function I(E){c=E,t(7,c)}function v(E){o=E,t(4,o)}function C(E){f=E,t(5,f)}function S(E){s=E,t(6,s)}return i.$$set=E=>{"imageFile"in E&&t(0,n=E.imageFile)},[n,r,a,l,o,f,s,c,w,u,g,R,I,v,C,S]}class kt extends Z{constructor(e){super(),$(this,e,vt,bt,x,{imageFile:0})}}function It(i){let e,t,n,r,a,l,o,f,s,c,w,u,g,R,I,v,C,S;return{c(){e=D("div"),t=D("div"),n=D("label"),r=D("div"),a=ce("svg"),l=ce("path"),o=N(),f=D("p"),s=D("span"),c=O("Click to upload"),w=O(" or drag and drop"),u=N(),g=D("p"),R=O("JPG, PNG, ... and image"),I=N(),v=D("input"),this.h()},l(E){e=y(E,"DIV",{class:!0});var h=L(e);t=y(h,"DIV",{class:!0});var U=L(t);n=y(U,"LABEL",{for:!0,class:!0});var k=L(n);r=y(k,"DIV",{class:!0});var F=L(r);a=me(F,"svg",{"aria-hidden":!0,class:!0,fill:!0,stroke:!0,viewBox:!0,xmlns:!0});var _=L(a);l=me(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),L(l).forEach(p),_.forEach(p),o=A(F),f=y(F,"P",{class:!0});var j=L(f);s=y(j,"SPAN",{class:!0});var d=L(s);c=q(d,"Click to upload"),d.forEach(p),w=q(j," or drag and drop"),j.forEach(p),u=A(F),g=y(F,"P",{class:!0});var P=L(g);R=q(P,"JPG, PNG, ... and image"),P.forEach(p),F.forEach(p),I=A(k),v=y(k,"INPUT",{id:!0,type:!0,class:!0,accept:!0}),k.forEach(p),U.forEach(p),h.forEach(p),this.h()},h(){m(l,"stroke-linecap","round"),m(l,"stroke-linejoin","round"),m(l,"stroke-width","2"),m(l,"d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"),m(a,"aria-hidden","true"),m(a,"class","w-10 h-10 mb-3 text-gray-400"),m(a,"fill","none"),m(a,"stroke","currentColor"),m(a,"viewBox","0 0 24 24"),m(a,"xmlns","http://www.w3.org/2000/svg"),m(s,"class","font-semibold"),m(f,"class","mb-2 text-sm text-gray-500 dark:text-gray-400"),m(g,"class","text-xs text-gray-500 dark:text-gray-400"),m(r,"class","flex flex-col items-center justify-center pt-5 pb-6"),m(v,"id",i[2]),m(v,"type","file"),m(v,"class","hidden"),m(v,"accept","image/*"),m(n,"for",i[2]),m(n,"class","flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600"),m(t,"class","flex items-center justify-center w-full max-w-xl"),m(e,"class","flex items-center justify-center grow")},m(E,h){T(E,e,h),b(e,t),b(t,n),b(n,r),b(r,a),b(a,l),b(r,o),b(r,f),b(f,s),b(s,c),b(f,w),b(r,u),b(r,g),b(g,R),b(n,I),b(n,v),C||(S=[W(v,"change",i[1]),W(n,"drop",i[0]),W(n,"dragover",Et)],C=!0)},p:M,i:M,o:M,d(E){E&&p(e),C=!1,se(S)}}}function Et(i){i.preventDefault()}function Ft(i){const e=Ue();function t(a){if(a.preventDefault(),console.log(a),!a.dataTransfer)return;console.log("1");let l=null;if(a.dataTransfer.items){const o=[...a.dataTransfer.items];for(let f of o)if(f.kind==="file"){const s=f.getAsFile();s&&(l=s);break}}else{const o=[...a.dataTransfer.files];o.length>0&&(l=o[0])}l&&e("selected",{file:l})}function n(a){if(a.currentTarget.files&&a.currentTarget.files.length){const[l]=a.currentTarget.files;e("selected",{file:l})}}let r=crypto.randomUUID();return[t,n,r]}class Dt extends Z{constructor(e){super(),$(this,e,Ft,It,x,{})}}function ke(i){let e,t;return e=new Dt({}),e.$on("selected",i[1]),{c(){X(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p:M,i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Ie(i){let e,t;return e=new kt({props:{imageFile:i[0].imageFile}}),{c(){X(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,r){K(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.imageFile=n[0].imageFile),e.$set(a)},i(n){t||(H(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function yt(i){let e,t,n,r=!i[0].imageFile&&ke(i),a=i[0].imageFile&&Ie(i);return{c(){e=D("div"),r&&r.c(),t=N(),a&&a.c(),this.h()},l(l){e=y(l,"DIV",{class:!0});var o=L(e);r&&r.l(o),t=A(o),a&&a.l(o),o.forEach(p),this.h()},h(){m(e,"class","flex flex-col flex-grow")},m(l,o){T(l,e,o),r&&r.m(e,null),b(e,t),a&&a.m(e,null),n=!0},p(l,[o]){l[0].imageFile?r&&(ue(),B(r,1,1,()=>{r=null}),he()):r?(r.p(l,o),o&1&&H(r,1)):(r=ke(l),r.c(),H(r,1),r.m(e,t)),l[0].imageFile?a?(a.p(l,o),o&1&&H(a,1)):(a=Ie(l),a.c(),H(a,1),a.m(e,null)):a&&(ue(),B(a,1,1,()=>{a=null}),he())},i(l){n||(H(r),H(a),n=!0)},o(l){B(r),B(a),n=!1},d(l){l&&p(e),r&&r.d(),a&&a.d()}}}function jt(i,e,t){let n={};function r(a){t(0,n.imageFile=a.detail.file,n)}return[n,r]}class Lt extends Z{constructor(e){super(),$(this,e,jt,yt,x,{})}}function zt(i){let e,t;return{c(){e=D("h6"),t=O("© 2022 Invemo LLC, All Rights Reserved"),this.h()},l(n){e=y(n,"H6",{class:!0});var r=L(e);t=q(r,"© 2022 Invemo LLC, All Rights Reserved"),r.forEach(p),this.h()},h(){m(e,"class","text-sm")},m(n,r){T(n,e,r),b(e,t)},p:M,i:M,o:M,d(n){n&&p(e)}}}class Vt extends Z{constructor(e){super(),$(this,e,null,zt,x,{})}}function Rt(i){let e,t,n,r,a,l,o;return t=new We({}),r=new Lt({}),l=new Vt({}),{c(){e=D("div"),X(t.$$.fragment),n=N(),X(r.$$.fragment),a=N(),X(l.$$.fragment),this.h()},l(f){e=y(f,"DIV",{class:!0});var s=L(e);Y(t.$$.fragment,s),n=A(s),Y(r.$$.fragment,s),a=A(s),Y(l.$$.fragment,s),s.forEach(p),this.h()},h(){m(e,"class","w-full min-h-screen bg-gray-50 dark:bg-gray-900 dark:text-gray-50 flex flex-col p-2")},m(f,s){T(f,e,s),K(t,e,null),b(e,n),K(r,e,null),b(e,a),K(l,e,null),o=!0},p:M,i(f){o||(H(t.$$.fragment,f),H(r.$$.fragment,f),H(l.$$.fragment,f),o=!0)},o(f){B(t.$$.fragment,f),B(r.$$.fragment,f),B(l.$$.fragment,f),o=!1},d(f){f&&p(e),Q(t),Q(r),Q(l)}}}class Tt extends Z{constructor(e){super(),$(this,e,null,Rt,x,{})}}export{Tt as default};
